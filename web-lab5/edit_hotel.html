<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css"> -->
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="container">
    <h1>Edit Hotel</h1>
    <input type="text" id="edit-hotel-name" placeholder="Hotel Name" />
    <input type="text" id="edit-hotel-location" placeholder="Location" />
    <input type="number" id="edit-hotel-rooms" placeholder="Total Rooms" />
    <input type="number" id="edit-hotel-rating" placeholder="Rating" />
    <button id="save-edited-hotel" onclick="saveEditedHotel()">Save Changes</button>
  </div>



  <script>let hotelIdToEdit = null;

    function loadHotelToEdit() {
      const urlParams = new URLSearchParams(window.location.search);
      hotelIdToEdit = urlParams.get('id');

      if (hotelIdToEdit !== null) {
        fetch(`http://localhost:5000/hotels/${hotelIdToEdit}`)
          .then(response => response.json())
          .then(data => {
            document.getElementById('edit-hotel-name').value = data.hotel.name;
            document.getElementById('edit-hotel-location').value = data.hotel.location;
            document.getElementById('edit-hotel-rooms').value = data.hotel.rooms;
            document.getElementById('edit-hotel-rating').value = data.hotel.rating;
          })
          .catch(error => console.error('Error loading hotel to edit:', error));
      } else {
        alert('Invalid hotel ID.');
      }
    }

    function saveEditedHotel() {
      const name = document.getElementById('edit-hotel-name').value;
      const location = document.getElementById('edit-hotel-location').value;
      const rooms = parseFloat(document.getElementById('edit-hotel-rooms').value);
      const rating = parseFloat(document.getElementById('edit-hotel-rating').value);


      if (location && !isNaN(rooms) && !isNaN(rating) && name && rooms >= 0 && rating >= 0) {
        const newHotel = {
          'name': name,
          'location': location,
          'rooms': rooms,
          'rating': rating
        };

        fetch(`http://localhost:5000/hotels/${hotelIdToEdit}`, {
          method: 'PUT',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(newHotel)
        })
          .then(response => response.json())
          .then(data => {
            window.location.href = 'main.html';
          })
          .catch(error => console.error('Error saving edited hotel:', error));
      } else {
        alert('Invalid input. Please provide valid hotel name, location, rooms, rating.');
      }
    }

    loadHotelToEdit();


  </script>
</body>

</html>